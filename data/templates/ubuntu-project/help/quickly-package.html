<HTML>
<HEAD>
<TITLE>Quickly Tutorial Part 3</TITLE>
<STYLE>
img
{
    display: block;
    width:668px;
    padding-top:10px;
}
p
{
    width: 800px;
}

</STYLE>
</HEAD>
<BODY>
<H1>Introduction to Part 3</H1>
<P>In parts 1 and 2, we showed how to create a simple Ubuntu application using Quickly. This section will cover how to package an application so that it is easy for you to share, and easy for other people to install.</P>
<H1>License your Project</H1>
<P>It's important to license your code so users and other programmers know their rights in terms of redistributing or modifying it. To quickly grant a GPL license to your  code, simply:</P>
<OL>
<LI>Specify your name and email address in the Copyright file.</LI>
<LI>Run the "license" command.</LI>
</OL>
<H2>Specify your name and email</H2>
<P>When Quickly created your Ubuntu project, it added a file named Copyright in the top level of the directory. Open this file in your text editor, and modify the top line so it has your name and email included. Be sure not to modify other lines as it will interfere with the next step. For exmaple, I would change the entire file to look like this:</P>
<DIV class="code"><TEXTAREA rows="3" cols="80">
# Copyright (C) 2009 Rick Spencer rick.spencer@canonical.com
### BEGIN AUTOMATIC LICENSE GENERATION
### END AUTOMATIC LICENSE GENERATION
</TEXTAREA></DIV>
<H2>Run the "License" Command</H2>
<P>By default, Quickly will use a GPL 3 license for your project. To use this license, use this command:</P>
<DIV class="terminal"><TEXTAREA rows="1" cols="80">
$quickly license
</TEXTAREA></DIV>
This will add the GPL 3 license to all of your code files that you've added to your project using Quickly. 

<P>Keep in mind a couple of things:<P>
<UL>
<LI>This is a one way trip. Once you license the project, changes to the license must be done manually.</LI>
<LI>If you prefer a GPL 2 license, you can specify that when you issue the license command:
<DIV class="terminal"><TEXTAREA rows="1" cols="80">
$quickly license GPL-2
</TEXTAREA></DIV>
</LI>
<LI>Quickly doesn't care what license you use, but only knows about GPL 2 and GPL 3. If you don't prefer GPL 2 or GPL 3 licenses, you can simply add whatever you license you like by replacing:
<DIV class="code"><TEXTAREA rows="3" cols="80">
### BEGIN LICENSE
# This file is in the public domain
### END LICENSE
</TEXTAREA></DIV>
with your license of choice in all your files.
</LI>
<LI>If you've added code files or other files to your project manually, you will need to add the license to those files manually as well.</LI>
</UL>
<H1>Specify Application Settings</H1>
<P>
You should personalize your applicaton a little before creating the archive. This is very easy to do, as all of the files that you need have already been created, and only need a few lines changed to make them your own. To do this you should:
</P>
<OL>
<LI>Personalize the Applicaation Icon</LI>
<LI>Edit the Desktop File</LI>
<LI>Edit the setup.py File</LI>
</OL>
<H2>Personalize your Application Icon</H2>
<P>
When users install your application, Ubuntu will display an icon next to it in the menus. You can create your own icon or edit the file called "icon.png" in the media directory (jotty/data/media). Ubuntu comes with a great image editing program called "Gimp." So you can go:</P>
<DIV class="terminal"><TEXTAREA rows="1" cols="80">
$gimp data/media/icon.png
</TEXTAREA></DIV>
<IMG SRC="./images/package0.png" ALT="customized jotty icon" />
</P>
<P>
If you don't personalize the icon, it's ok, your app will just have the default icon, such as in the image below.
</P>
<H2>Edit the Desktop File</H2>
<P>
By defualt, Quickly Ubuntu-Project applications are classified as "utilities", so they show up under the Accessories menu in Ubuntu. If we wanted to make Jotty show up in another category, we can do this by editing the desktop file. A desktop file is a file that describes your application to a Linux desktop. The file "jottydesktop.in" was automatically created in the jotty project directory. To change Jotty from a Utility to an Office application, edit jotty.desktop.in and change this:
</P>
<DIV class="code"><TEXTAREA rows="8" cols="80">
[Desktop Entry]
Name=Jotty
Comment=Jotty application
Categories=GNOME;Utility;
Exec=jotty
Icon=jotty
Terminal=false
Type=Application
</TEXTAREA></DIV>

<P>
to this:
</P>
<DIV class="code"><TEXTAREA rows="8" cols="80">
[Desktop Entry]
Name=Jotty
Comment=Jotty application
Categories=GNOME;Office;
Exec=jotty
Icon=jotty
Terminal=false
Type=Application
</TEXTAREA></DIV>
<P>
There are lots more categories that you can use, all defined by the FreeDesktop spec. You can see the complete list in the <A HREF="http://standards.freedesktop.org/menu-spec/latest/apa.html">menu spec</A>.
</P>
<H2>Edit Setup.py</H2>
<P>
Finally, you should include some informatoin in the setup.py file to tell your users a little about yourself. The setup.py file was created for you, just like the desktop file. Most of of the setup.py file shouldn't be modified, as it is just boiler plate that makes your application work properly after it has been installed. However, there is a section at the bottom of the setup.py file that you should edit to describe yourself and the application.
</P>
<P>
So I would change this section:
</P>
<DIV class="code"><TEXTAREA rows="8" cols="80">
DistUtilsExtra.auto.setup(
    name='jotty',
    version='0.1',
    license='GPL v3',
    #author='Your Name',
    #author_email='email@ubuntu.com',
    #description='UI for managing â€¦',
    #long_description='Here a longer description',
    #url='https://launchpad.net/jotty',
    cmdclass={'install': InstallAndUpdateDataDirectory}
    )
</TEXTAREA></DIV>
<P>
To look like this:
</P>
<DIV class="code"><TEXTAREA rows="8" cols="80">
DistUtilsExtra.auto.setup(
    name='jotty',
    version='0.1',
    license='GPL v3',
    author='Rick Spencer',
    author_email='rick.spencer@canonical.com',
    description='Note taking application',
    long_description='Note taking application that uses CouchDB as the backend to support easy replication across users and computers.',
    #url='https://launchpad.net/jotty',
    cmdclass={'install': InstallAndUpdateDataDirectory}
    )
</TEXTAREA></DIV>

<P>
Notice that Jotty doesn't have a web page yet, so I just left that line commented out. Also, if you enhance the application and want to repackage it, you should make sure to increment version so that it will properly update itself for your users who have installed the first version.
</P>

</TEXTAREA></DIV>
<H1>Create and Test the Debian Archive</H1>
<P>
After personalizing the project, we are now ready to create the package. This is easily done by issueing the package command:
</P>
<DIV class="terminal"><TEXTAREA rows="1" cols="80">
$quickly package
</TEXTAREA></DIV>
<P>This command will take a little while to discover dependencies and create all the required archives, etc... It will also report some errors as we haven't created a PGP key, for instance. None the less, when it is done, the package will be created. Using the file browser, you can see the created package next to the project directory:</P>
<IMG SRC="./images/package1.png" ALT="package command creates .deb archive" />
<P>Right now, the specific file we are interested in is "jotty_0.1_all.deb". To test it out, double click on it, to open it in Ubuntu's graphical installer program:</P>
<IMG SRC="./images/package2.png" ALT="deb opened in gdebi" />
<P>Click "Install Package" to see how it  installs onto your desktop. After chugging for a bit, you'll see that it is installed in the Applications->Office menu. If you customized your icon, you'll see that the menu uses your custom icon as well.</p>
<IMG SRC="./images/package3.png" ALT="jotty installed" />
<H1>Now that you have a package</H1>
<P>Now that you've packaged your application, you can share the .deb file. However, if your users install their application this way, and you update the appliation, your users will have to find this out and resinstall. This hassle can be avoided in Ubuntu by using Personal Package Archives (or PPAs). Distrubuting your applications in this manner is covered in section 4.</P>
</BODY>
